<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GA4 ë°ì´í„° ìˆ˜ì§‘ í…ŒìŠ¤íŠ¸ í˜ì´ì§€</title>
    
    <!-- í†µí•© ì¶”ì  ì´ˆê¸°í™” -->
    <script>
        window.dataLayer = window.dataLayer || [];
        window.__GA_MEASUREMENT_ID__ = 'G-DE2ZNKWV2W';
        window.__GTM_ID__ = 'GTM-594SVWKB';
        console.log('[TRACKING] ğŸš€ Starting enhanced tracking test');
    </script>
    
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-594SVWKB');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Google Analytics 4 - ê°•í™”ëœ ì¶”ì  -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DE2ZNKWV2W"></script>
    <script>
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        
        gtag('config', 'G-DE2ZNKWV2W', { 
            send_page_view: true,
            transport_type: 'beacon',
            allow_enhanced_conversions: true,
            anonymize_ip: false,
            allow_google_signals: true,
            debug_mode: true,
            dev_id: 'dZTNiMT'
        });
        
        // ì¦‰ì‹œ í˜ì´ì§€ë·° ì „ì†¡
        gtag('event', 'page_view', {
            page_title: document.title,
            page_location: window.location.href,
            page_path: window.location.pathname
        });
        
        console.log('[GA4] âœ… Enhanced GA4 initialized');
    </script>
    
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .test-button { background: #4285f4; color: white; border: none; padding: 15px 30px; 
                      font-size: 16px; border-radius: 5px; cursor: pointer; margin: 10px; 
                      display: block; width: 300px; }
        .test-button:hover { background: #3367d6; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; background: #f0f0f0; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        #console-output { background: #000; color: #00ff00; padding: 15px; font-family: monospace; 
                         height: 300px; overflow-y: auto; white-space: pre-wrap; }
    </style>
</head>
<body>
    <!-- GTM noscript -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-594SVWKB"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <h1>ğŸ§ª GA4 ë°ì´í„° ìˆ˜ì§‘ í…ŒìŠ¤íŠ¸</h1>
    
    <div class="status" id="status">ì´ˆê¸°í™” ì¤‘...</div>
    
    <h2>GA4 í‘œì¤€ ì´ë²¤íŠ¸ í…ŒìŠ¤íŠ¸</h2>
    
    <button class="test-button" onclick="sendStandardEvent('click')">
        í‘œì¤€ ì´ë²¤íŠ¸: click
    </button>
    
    <button class="test-button" onclick="sendStandardEvent('select_content')">
        í‘œì¤€ ì´ë²¤íŠ¸: select_content
    </button>
    
    <button class="test-button" onclick="sendStandardEvent('purchase')">
        í‘œì¤€ ì´ë²¤íŠ¸: purchase
    </button>
    
    <button class="test-button" onclick="sendPageView()">
        í˜ì´ì§€ë·° ì¬ì „ì†¡
    </button>
    
    <button class="test-button" onclick="checkNetworkRequests()">
        ë„¤íŠ¸ì›Œí¬ ìš”ì²­ í™•ì¸
    </button>
    
    <h2>ì‹¤ì‹œê°„ ì½˜ì†”</h2>
    <div id="console-output"></div>
    
    <h2>âœ… í™•ì¸ ë°©ë²•</h2>
    <ol>
        <li><strong>GA4 ì‹¤ì‹œê°„ ê°œìš”</strong>ì—ì„œ "í™œì„± ì‚¬ìš©ì" í™•ì¸</li>
        <li><strong>ì´ë²¤íŠ¸</strong> ì„¹ì…˜ì—ì„œ ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ í™•ì¸</li>
        <li><strong>ë¸Œë¼ìš°ì € Network íƒ­</strong>ì—ì„œ google-analytics.com ìš”ì²­ í™•ì¸</li>
        <li><strong>GA4 DebugView</strong> í™œì„±í™”í•˜ì—¬ ë””ë²„ê·¸ ì´ë²¤íŠ¸ í™•ì¸</li>
    </ol>
    
    <script>
        // ì½˜ì†” ì¶œë ¥ ìº¡ì²˜
        const output = document.getElementById('console-output');
        const originalLog = console.log;
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            const timestamp = new Date().toLocaleTimeString();
            output.textContent += `[${timestamp}] ${args.join(' ')}\n`;
            output.scrollTop = output.scrollHeight;
        };
        
        // GA4 í‘œì¤€ ì´ë²¤íŠ¸ ì „ì†¡
        function sendStandardEvent(eventName) {
            console.log(`[TEST] Sending standard event: ${eventName}`);
            
            const eventParams = {
                event_category: 'test',
                event_label: `test_${eventName}`,
                value: 1,
                timestamp: Date.now()
            };
            
            if (eventName === 'purchase') {
                eventParams.transaction_id = 'test_' + Date.now();
                eventParams.value = 99.99;
                eventParams.currency = 'USD';
            }
            
            if (eventName === 'select_content') {
                eventParams.content_type = 'button';
                eventParams.item_id = 'test_button';
            }
            
            gtag('event', eventName, eventParams);
            console.log(`[TEST] âœ… ${eventName} event sent with params:`, eventParams);
        }
        
        // í˜ì´ì§€ë·° ì¬ì „ì†¡
        function sendPageView() {
            console.log('[TEST] Sending page view...');
            gtag('event', 'page_view', {
                page_title: document.title,
                page_location: window.location.href,
                page_path: window.location.pathname,
                timestamp: Date.now()
            });
            console.log('[TEST] âœ… Page view sent');
        }
        
        // ë„¤íŠ¸ì›Œí¬ ìš”ì²­ í™•ì¸
        function checkNetworkRequests() {
            console.log('[NETWORK] Recent network activity:');
            console.log('[NETWORK] Check your browser Network tab for:');
            console.log('[NETWORK] - google-analytics.com/g/collect requests');
            console.log('[NETWORK] - googletagmanager.com requests');
            
            // ìƒíƒœ ì—…ë°ì´íŠ¸
            updateStatus();
        }
        
        // ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateStatus() {
            const statusDiv = document.getElementById('status');
            const hasGtag = typeof gtag === 'function';
            const hasDataLayer = Array.isArray(window.dataLayer);
            const dataLayerEvents = window.dataLayer.length;
            
            statusDiv.innerHTML = `
                <strong>GA4 ìƒíƒœ:</strong><br>
                âœ… gtag í•¨ìˆ˜: ${hasGtag ? 'OK' : 'FAIL'}<br>
                âœ… dataLayer: ${hasDataLayer ? 'OK' : 'FAIL'} (${dataLayerEvents}ê°œ ì´ë²¤íŠ¸)<br>
                âœ… ì¸¡ì • ID: G-DE2ZNKWV2W<br>
                âœ… Debug ëª¨ë“œ: í™œì„±í™”ë¨
            `;
            statusDiv.className = 'status ' + (hasGtag && hasDataLayer ? 'success' : 'error');
            
            console.log('[STATUS] GA4 Status updated:', {
                gtag: hasGtag,
                dataLayer: hasDataLayer,
                events: dataLayerEvents
            });
        }
        
        // ì´ˆê¸°í™” í™•ì¸
        setTimeout(() => {
            updateStatus();
            console.log('[INIT] GA4 test page initialized');
            console.log('[INIT] Please check GA4 Real-time reports now!');
        }, 2000);
        
        // ìë™ ì´ë²¤íŠ¸ ì „ì†¡ (í…ŒìŠ¤íŠ¸ìš©)
        setTimeout(() => {
            sendStandardEvent('select_content');
        }, 3000);
    </script>
</body>
</html>